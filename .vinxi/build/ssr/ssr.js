import{isServer as x,getRequestEvent as q,createComponent as w,delegateEvents as Ue,ssrElement as K,escape as O,mergeProps as je,ssr as H,useAssets as Be,NoHydration as ge,HydrationScript as We,ssrHydrationKey as G,ssrAttribute as De,Hydration as Ke,renderToStream as ze}from"solid-js/web";import{p as Je,M as Ve,T as Ge,L as z,H as Xe,m as Ye}from"./assets/HttpStatusCode-08a2c9d1.js";import{getOwner as ye,runWithOwner as we,createMemo as E,createContext as be,createSignal as k,createRenderEffect as Qe,untrack as oe,useContext as Ze,on as ve,startTransition as et,resetErrorBoundaries as ae,createComponent as Re,children as tt,createRoot as nt,Show as Se,onCleanup as Ae,lazy as rt,Suspense as st,ErrorBoundary as ot,sharedConfig as ie}from"solid-js";import{provideRequestEvent as at}from"solid-js/web/storage";import{H3Event as X,setResponseStatus as it,sendRedirect as ct,getCookie as ut,setCookie as lt,setHeader as ht,getRequestIP as ft,getResponseStatus as dt,getResponseStatusText as pt,getRequestURL as mt,getResponseHeaders as gt,getResponseHeader as yt,setResponseHeader as wt,appendResponseHeader as bt,removeResponseHeader as vt,getRequestWebStream as Rt,eventHandler as St}from"h3";import{AsyncLocalStorage as At}from"node:async_hooks";function Ee(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let n=!1;function r(s,a){if(n)return!(n=!1);const o={to:s,options:a,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const i of e)i.listener({...o,from:i.location,retry:c=>{c&&(n=!0),i.navigate(s,{...a,resolve:!1})}});return!o.defaultPrevented}return{subscribe:t,confirm:r}}let Y;function ee(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Y=window.history.state._depth}x||ee();function Et(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Ct(e,t){let n=!1;return()=>{const r=Y;ee();const s=r==null?null:Y-r;if(n){n=!1;return}s&&t(s)?(n=!0,window.history.go(-s)):e()}}const Tt=/^(?:[a-z0-9]+:)?\/\//i,Lt=/^\/+|(\/)\/+$/g,Ce="http://sr";function F(e,t=!1){const n=e.replace(Lt,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function j(e,t,n){if(Tt.test(t))return;const r=F(e),s=n&&F(n);let a="";return!s||t.startsWith("/")?a=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?a=r+s:a=s,(a||"/")+F(t,!a)}function Pt(e,t){return F(e).replace(/\/*(\*.*)?$/g,"")+F(t)}function te(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function $t(e,t,n){const[r,s]=e.split("/*",2),a=r.split("/").filter(Boolean),o=a.length;return i=>{const c=i.split("/").filter(Boolean),f=c.length-o;if(f<0||f>0&&s===void 0&&!t)return null;const u={path:o?"":"/",params:{}},d=m=>n===void 0?void 0:n[m];for(let m=0;m<o;m++){const b=a[m],l=c[m],h=b[0]===":",g=h?b.slice(1):b;if(h&&J(l,d(g)))u.params[g]=l;else if(h||!J(l,b))return null;u.path+=`/${l}`}if(s){const m=f?c.slice(-f).join("/"):"";if(J(m,d(s)))u.params[s]=m;else return null}return u}}function J(e,t){const n=r=>r.localeCompare(e,void 0,{sensitivity:"base"})===0;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function xt(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((s,a)=>s+(a.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Te(e){const t=new Map,n=ye();return new Proxy({},{get(r,s){return t.has(s)||we(n,()=>t.set(s,E(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Le(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return Le(r).reduce((a,o)=>[...a,...s.map(i=>i+o)],[])}const qt=100,Ht=be(),ne=be();function _t(e,t=""){const{component:n,load:r,children:s,info:a}=e,o=!s||Array.isArray(s)&&!s.length,i={key:e,component:n,load:r,info:a};return Pe(e.path).reduce((c,f)=>{for(const u of Le(f)){const d=Pt(t,u);let m=o?d:d.split("/*",1)[0];m=m.split("/").map(b=>b.startsWith(":")||b.startsWith("*")?b:encodeURIComponent(b)).join("/"),c.push({...i,originalPath:u,pattern:m,matcher:$t(m,!o,e.matchFilters)})}return c},[])}function kt(e,t=0){return{routes:e,score:xt(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s],o=a.matcher(n);if(!o)return null;r.unshift({...o,route:a})}return r}}}function Pe(e){return Array.isArray(e)?e:[e]}function $e(e,t="",n=[],r=[]){const s=Pe(e);for(let a=0,o=s.length;a<o;a++){const i=s[a];if(i&&typeof i=="object"){i.hasOwnProperty("path")||(i.path="");const c=_t(i,t);for(const f of c){n.push(f);const u=Array.isArray(i.children)&&i.children.length===0;if(i.children&&!u)$e(i.children,f.pattern,n,r);else{const d=kt([...n],r.length);r.push(d)}n.pop()}}}return n.length?r:r.sort((a,o)=>o.score-a.score)}function B(e,t){for(let n=0,r=e.length;n<r;n++){const s=e[n].matcher(t);if(s)return s}return[]}function Ot(e,t){const n=new URL(Ce),r=E(c=>{const f=e();try{return new URL(f,n)}catch{return console.error(`Invalid path ${f}`),c}},n,{equals:(c,f)=>c.href===f.href}),s=E(()=>r().pathname),a=E(()=>r().search,!0),o=E(()=>r().hash),i=()=>"";return{get pathname(){return s()},get search(){return a()},get hash(){return o()},get state(){return t()},get key(){return i()},query:Te(ve(a,()=>te(r())))}}let T;function Ft(e,t,n,r={}){const{signal:[s,a],utils:o={}}=e,i=o.parsePath||(p=>p),c=o.renderPath||(p=>p),f=o.beforeLeave||Ee(),u=j("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&a({value:u,replace:!0,scroll:!1});const[d,m]=k(!1),b=async p=>{m(!0);try{await et(p)}finally{m(!1)}},[l,h]=k(s().value),[g,y]=k(s().state),I=Ot(l,g),S=[],C=k(x?Ne():[]),_={pattern:u,params:{},path:()=>u,outlet:()=>null,resolvePath(p){return j(u,p)}};return Qe(()=>{const{value:p,state:v}=s();oe(()=>{p!==l()&&b(()=>{T="native",h(p),y(v),ae(),C[1]([])}).then(()=>{T=void 0})})}),{base:_,location:I,isRouting:d,renderPath:c,parsePath:i,navigatorFactory:Fe,beforeLeave:f,preloadRoute:Me,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:C};function Oe(p,v,L){oe(()=>{if(typeof v=="number"){v&&(o.go?o.go(v):console.warn("Router integration does not support relative routing"));return}const{replace:M,resolve:D,scroll:P,state:$}={replace:!1,resolve:!0,scroll:!0,...L},A=D?p.resolvePath(v):j("",v);if(A===void 0)throw new Error(`Path '${v}' is not a routable path`);if(S.length>=qt)throw new Error("Too many redirects");const se=l();if(A!==se||$!==g()){if(x){const N=q();N&&(N.response={status:302,headers:new Headers({Location:A})}),a({value:A,replace:M,scroll:P,state:$})}else if(f.confirm(A,L)){const N=S.push({value:se,replace:M,scroll:P,state:g()});b(()=>{T="navigate",h(A),y($),ae(),C[1]([])}).then(()=>{S.length===N&&(T=void 0,Ie({value:A,state:$}))})}}})}function Fe(p){return p=p||Ze(ne)||_,(v,L)=>Oe(p,v,L)}function Ie(p){const v=S[0];v&&((p.value!==v.value||p.state!==v.state)&&a({...p,replace:v.replace,scroll:v.scroll}),S.length=0)}function Me(p,v){const L=B(n(),p.pathname),M=T;T="preload";for(let D in L){const{route:P,params:$}=L[D];P.component&&P.component.preload&&P.component.preload();const{load:A}=P;v&&A&&we(t(),()=>A({params:$,location:{pathname:p.pathname,search:p.search,hash:p.hash,query:te(p),state:null,key:""},intent:"preload"}))}T=M}function Ne(){const p=q();return p&&p.router&&p.router.submission?[p.router.submission]:[]}}function It(e,t,n,r,s){const{base:a,location:o}=e,{pattern:i,component:c,load:f}=r().route,u=E(()=>r().path);c&&c.preload&&c.preload();const d=f?f({params:s,location:o,intent:T||"initial"}):void 0;return{parent:t,pattern:i,path:u,params:s,outlet:()=>c?Re(c,{params:s,location:o,data:d,get children(){return n()}}):n(),resolvePath(b){return j(a.path(),b,u())}}}const xe=e=>t=>{const{base:n}=t,r=tt(()=>t.children),s=E(()=>$e(t.root?{component:t.root,load:t.rootLoad,children:r()}:r(),t.base||""));let a;const o=Ft(e,()=>a,s,{base:n,singleFlight:t.singleFlight});return e.create&&e.create(o),w(Ht.Provider,{value:o,get children(){return[(a=ye())&&null,w(Mt,{routerState:o,get branches(){return s()}})]}})};function Mt(e){const t=E(()=>B(e.branches,e.routerState.location.pathname));if(x){const o=q();if(o&&o.router&&o.router.dataOnly){Ut(o,e.branches);return}o&&((o.router||(o.router={})).matches||(o.router.matches=t().map(({route:i,path:c,params:f})=>({path:i.originalPath,pattern:i.pattern,match:c,params:f,info:i.info}))))}const n=Te(()=>{const o=t(),i={};for(let c=0;c<o.length;c++)Object.assign(i,o[c].params);return i}),r=[];let s;const a=E(ve(t,(o,i,c)=>{let f=i&&o.length===i.length;const u=[];for(let d=0,m=o.length;d<m;d++){const b=i&&i[d],l=o[d];c&&b&&l.route.key===b.route.key?u[d]=c[d]:(f=!1,r[d]&&r[d](),nt(h=>{r[d]=h,u[d]=It(e.routerState,u[d-1]||e.routerState.base,Nt(()=>a()[d+1]),()=>t()[d],n)}))}return r.splice(o.length).forEach(d=>d()),c&&f?c:(s=u[0],u)}));return w(Se,{get when(){return a()&&s},keyed:!0,children:o=>w(ne.Provider,{value:o,get children(){return o.outlet()}})})}const Nt=e=>()=>w(Se,{get when(){return e()},keyed:!0,children:t=>w(ne.Provider,{value:t,get children(){return t.outlet()}})});function Ut(e,t){const n=new URL(e.request.url),r=B(t,new URL(e.router.previousUrl||e.request.url).pathname),s=B(t,n.pathname);for(let a=0;a<s.length;a++){(!r[a]||s[a].route!==r[a].route)&&(e.router.dataOnly=!0);const{route:o,params:i}=s[a];o.load&&o.load({params:i,location:{pathname:n.pathname,search:n.search,hash:n.hash,query:te(n),state:null,key:""},intent:"preload"})}}function jt([e,t],n,r){return[n?()=>n(e()):e,r?s=>t(r(s)):t]}function Bt(e){if(e==="#")return null;try{return document.querySelector(e)}catch{return null}}function Wt(e){let t=!1;const n=s=>typeof s=="string"?{value:s}:s,r=jt(k(n(e.get()),{equals:(s,a)=>s.value===a.value}),void 0,s=>(!t&&e.set(s),s));return e.init&&Ae(e.init((s=e.get())=>{t=!0,r[1](n(s)),t=!1})),xe({signal:r,create:e.create,utils:e.utils})}function Dt(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Kt(e,t){const n=Bt(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function zt(e){const t=new URL(e);return t.pathname+t.search}function Jt(e){let t;const n={value:e.url||(t=q())&&zt(t.request.url)||""};return xe({signal:[()=>n,r=>Object.assign(n,r)]})(e)}const Vt=new Map;function Gt(e=!0,t=!1,n="/_server"){return r=>{const s=r.base.path(),a=r.navigatorFactory(r.base);let o={};function i(l){return l.namespaceURI==="http://www.w3.org/2000/svg"}function c(l){if(l.defaultPrevented||l.button!==0||l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)return;const h=l.composedPath().find(_=>_ instanceof Node&&_.nodeName.toUpperCase()==="A");if(!h||t&&!h.hasAttribute("link"))return;const g=i(h),y=g?h.href.baseVal:h.href;if((g?h.target.baseVal:h.target)||!y&&!h.hasAttribute("state"))return;const S=(h.getAttribute("rel")||"").split(/\s+/);if(h.hasAttribute("download")||S&&S.includes("external"))return;const C=g?new URL(y,document.baseURI):new URL(y);if(!(C.origin!==window.location.origin||s&&C.pathname&&!C.pathname.toLowerCase().startsWith(s.toLowerCase())))return[h,C]}function f(l){const h=c(l);if(!h)return;const[g,y]=h,I=r.parsePath(y.pathname+y.search+y.hash),S=g.getAttribute("state");l.preventDefault(),a(I,{resolve:!1,replace:g.hasAttribute("replace"),scroll:!g.hasAttribute("noscroll"),state:S&&JSON.parse(S)})}function u(l){const h=c(l);if(!h)return;const[g,y]=h;o[y.pathname]||r.preloadRoute(y,g.getAttribute("preload")!=="false")}function d(l){const h=c(l);if(!h)return;const[g,y]=h;o[y.pathname]||(o[y.pathname]=setTimeout(()=>{r.preloadRoute(y,g.getAttribute("preload")!=="false"),delete o[y.pathname]},200))}function m(l){const h=c(l);if(!h)return;const[,g]=h;o[g.pathname]&&(clearTimeout(o[g.pathname]),delete o[g.pathname])}function b(l){let h=l.submitter&&l.submitter.hasAttribute("formaction")?l.submitter.getAttribute("formaction"):l.target.getAttribute("action");if(!h)return;if(!h.startsWith("https://action/")){const y=new URL(h,Ce);if(h=r.parsePath(y.pathname+y.search),!h.startsWith(n))return}if(l.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const g=Vt.get(h);if(g){l.preventDefault();const y=new FormData(l.target);l.submitter&&l.submitter.name&&y.append(l.submitter.name,l.submitter.value),g.call(r,y)}}Ue(["click","submit"]),document.addEventListener("click",f),e&&(document.addEventListener("mouseover",d),document.addEventListener("mouseout",m),document.addEventListener("focusin",u),document.addEventListener("touchstart",u)),document.addEventListener("submit",b),Ae(()=>{document.removeEventListener("click",f),e&&(document.removeEventListener("mouseover",d),document.removeEventListener("mouseout",m),document.removeEventListener("focusin",u),document.removeEventListener("touchstart",u)),document.removeEventListener("submit",b)})}}function Xt(e){if(x)return Jt(e);const t=()=>({value:window.location.pathname+window.location.search+window.location.hash,state:window.history.state}),n=Ee();return Wt({get:t,set({value:r,replace:s,scroll:a,state:o}){s?window.history.replaceState(Et(o),"",r):window.history.pushState(o,"",r),Kt(window.location.hash.slice(1),a),ee()},init:r=>Dt(window,"popstate",Ct(r,s=>{if(s&&s<0)return!n.confirm(s);{const a=t();return!n.confirm(a.value,{state:a.state})}})),create:Gt(e.preload,e.explicitLinks,e.actionBase),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}function Yt(e){e.forEach(t=>{if(!t.attrs.href)return;let n=document.head.querySelector(`link[href="${t.attrs.href}"]`);n||(n=document.createElement("link"),n.setAttribute("rel","preload"),n.setAttribute("as","style"),n.setAttribute("href",t.attrs.href),document.head.appendChild(n))})}var Qt=" ";const Zt={style:e=>K("style",e.attrs,()=>O(e.children),!0),link:e=>K("link",e.attrs,void 0,!0),script:e=>e.attrs.src?K("script",je(()=>e.attrs,{get id(){return e.key}}),()=>H(Qt),!0):null};function Q(e){let{tag:t,attrs:{key:n,...r}={key:void 0},children:s}=e;return Zt[t]({attrs:r,key:n,children:s})}function en(e,t,n,r="default"){return rt(async()=>{{const a=(await e.import())[r],i=(await t.inputs?.[e.src].assets()).filter(f=>f.tag==="style"||f.attrs.rel==="stylesheet");return typeof window<"u"&&Yt(i),{default:f=>[...i.map(u=>Q(u)),Re(a,f)]}}})}function qe(){function e(n){return{...n,...n.$$route?n.$$route.require().route:void 0,info:{...n.$$route?n.$$route.require().route.info:{},filesystem:!0},component:en(n.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:n.children?n.children.map(e):void 0}}return Je.map(e)}let ce;const tn=()=>x?q().routes:ce||(ce=qe());function nn(){return w(Xt,{root:e=>w(Ve,{get children(){return[w(Ge,{children:"Tr√°fico"}),w(z,{rel:"preconnect",href:"https://fonts.googleapis.com"}),w(z,{rel:"preconnect",href:"https://fonts.gstatic.com"}),w(z,{href:"https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap",rel:"stylesheet"}),w(st,{get children(){return e.children}})]}}),get children(){return w(tn,{})}})}function rn(e){return w(ot,{get fallback(){return w(Xe,{code:500})},get children(){return e.children}})}var sn=["<script",">","<\/script>"],on=["<script",' type="module" async',"><\/script>"];const an=H("<!DOCTYPE html>");function He(e,t,n=[]){for(let r=0;r<t.length;r++){const s=t[r];if(s.path!==e[0].path)continue;let a=[...n,s];if(s.children){const o=e.slice(1);if(o.length===0||(a=He(o,s.children,a),!a))continue}return a}}function cn(e){const t=q();let n=[];return Promise.resolve().then(async()=>{if(t.router&&t.router.matches){const r=[...t.router.matches];for(;r.length&&(!r[0].info||!r[0].info.filesystem);)r.shift();const s=r.length&&He(r,t.routes);if(s)for(let a=0;a<s.length;a++){const o=s[a],c=await globalThis.MANIFEST.client.inputs[o.$component.src].assets();n.push.apply(n,c)}else console.warn("No route matched for preloading js assets")}n=[...new Map(n.map(r=>[r.attrs.key,r])).values()].filter(r=>r.attrs.rel==="modulepreload"&&!t.assets.find(s=>s.attrs.key===r.attrs.key))}),Be(()=>n.length?n.map(r=>Q(r)):void 0),w(ge,{get children(){return[an,w(e.document,{get assets(){return[w(We,{}),t.assets.map(r=>Q(r))]},get scripts(){return[H(sn,G(),`window.manifest = ${JSON.stringify(t.manifest)}`),H(on,G(),De("src",O(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]},get children(){return w(Ke,{get children(){return w(rn,{get children(){return w(nn,{})}})}})}})]}})}function un(e={}){let t,n=!1;const r=o=>{if(t&&t!==o)throw new Error("Context conflict")};let s;if(e.asyncContext){const o=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const a=()=>{if(s&&t===void 0){const o=s.getStore();if(o!==void 0)return o}return t};return{use:()=>{const o=a();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>a(),set:(o,i)=>{i||r(o),t=o,n=!0},unset:()=>{t=void 0,n=!1},call:(o,i)=>{r(o),t=o;try{return s?s.run(o,i):i()}finally{n||(t=void 0)}},async callAsync(o,i){t=o;const c=()=>{t=o},f=()=>t===o?c:void 0;he.add(f);try{const u=s?s.run(o,i):i();return n||(t=void 0),await u}finally{he.delete(f)}}}}function ln(e={}){const t={};return{get(n,r={}){return t[n]||(t[n]=un({...e,...r})),t[n],t[n]}}}const W=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},ue="__unctx__",hn=W[ue]||(W[ue]=ln()),fn=(e,t={})=>hn.get(e,t),le="__unctx_async_handlers__",he=W[le]||(W[le]=new Set);function dn(e){let t;const n=_e(e),r={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(n,{...r,body:e.node.req.body}):new Request(n,{...r,get body(){return t||(t=Cn(e),t)}})}function pn(e){return e.web??={request:dn(e),url:_e(e)},e.web.request}function mn(){return $n()}const re=Symbol("$HTTPEvent");function gn(e){return typeof e=="object"&&(e instanceof X||e?.[re]instanceof X||e?.__is_event__===!0)}function R(e){return function(...t){let n=t[0];if(gn(n))t[0]=n instanceof X||n.__is_event__?n:n[re];else{if(!globalThis.app.config.server.experimental?.asyncContext)throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(n=mn(),!n)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");t.unshift(n)}return e(...t)}}const _e=R(mt),yn=R(ft),Z=R(it),fe=R(dt),wn=R(pt),U=R(gt),de=R(yt),bn=R(wt),vn=R(bt),Rn=R(ct),Sn=R(ut),An=R(lt),En=R(ht),Cn=R(Rt),Tn=R(vt),Ln=R(pn);function Pn(){return fn("nitro-app",{asyncContext:!!globalThis.app.config.server.experimental?.asyncContext,AsyncLocalStorage:At})}function $n(){return Pn().use().event}const V=Symbol("fetchEvent");function xn(e){return{request:Ln(e),response:_n(e),clientAddress:yn(e),locals:{},nativeEvent:e,[re]:e}}function qn(e){if(!e[V]){const t=xn(e);e[V]=t}return e[V]}class Hn{constructor(t){this.event=t}get(t){const n=de(this.event,t);return Array.isArray(n)?n.join(", "):n}has(t){return this.get(t)!==void 0}set(t,n){return bn(this.event,t,n)}delete(t){return Tn(this.event,t)}append(t,n){vn(this.event,t,n)}getSetCookie(){const t=de(this.event,"Set-Cookie");return Array.isArray(t)?t:[t]}forEach(t){return Object.entries(U(this.event)).forEach(([n,r])=>t(Array.isArray(r)?r.join(", "):r,n,this))}entries(){return Object.entries(U(this.event)).map(([t,n])=>[t,Array.isArray(n)?n.join(", "):n])[Symbol.iterator]()}keys(){return Object.keys(U(this.event))[Symbol.iterator]()}values(){return Object.values(U(this.event)).map(t=>Array.isArray(t)?t.join(", "):t)[Symbol.iterator]()}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}function _n(e){return{get status(){return fe(e)},set status(t){Z(e,t)},get statusText(){return wn(e)},set statusText(t){Z(e,fe(),t)},headers:new Hn(e)}}function kn(e){const t=Sn(e,"flash");if(!t)return;let n=JSON.parse(t);if(!n||!n.result)return[];const r=[...n.input.slice(0,-1),new Map(n.input[n.input.length-1])];return An(e,"flash","",{maxAge:0}),{url:n.url,result:n.error?new Error(n.result):n.result,input:r}}async function ke(e){const t=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,e.response.headers.set("Content-Type","text/html"),Object.assign(e,{manifest:await t.json(),assets:[...await t.inputs[t.handler].assets()],router:{submission:kn(e)},routes:qe(),$islands:new Set})}function On(e,t={}){return St({onRequest:t.onRequest,onBeforeResponse:t.onBeforeResponse,handler:n=>{const r=qn(n);return at(r,async()=>{const s=Ye(new URL(r.request.url).pathname,r.request.method);if(s){const d=(await s.handler.import())[r.request.method];r.params=s.params||{},ie.context={event:r};const m=await d(r);if(m!==void 0)return m;if(r.request.method!=="GET")throw new Error(`API handler for ${r.request.method} "${r.request.url}" did not return a response.`)}const a=await ke(r);let o={...t};if(o.onCompleteAll){const u=o.onCompleteAll;o.onCompleteAll=d=>{me(a)(d),u(d)}}else o.onCompleteAll=me(a);if(o.onCompleteShell){const u=o.onCompleteShell;o.onCompleteShell=d=>{pe(a,n)(),u(d)}}else o.onCompleteShell=pe(a,n);const i=ze(()=>(ie.context.event=a,e(a)),o);if(a.response&&a.response.headers.get("Location"))return Rn(r,a.response.headers.get("Location"));const{writable:c,readable:f}=new TransformStream;return i.pipeTo(c),f})}})}function pe(e,t){return()=>{e.response&&e.response.headers.get("Location")&&(Z(t,302),En(t,"Location",e.response.headers.get("Location")))}}function me(e){return({write:t})=>{const n=e.response&&e.response.headers.get("Location");n&&t(`<script>window.location="${n}"<\/script>`)}}function Fn(e,t={}){return On(e,{...t,createPageEvent:ke})}var In=['<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico">',"</head>"],Mn=["<html",' lang="en">','<body><div id="app">',"</div><!--$-->","<!--/--></body></html>"];const Kn=Fn(()=>w(cn,{document:({assets:e,children:t,scripts:n})=>H(Mn,G(),w(ge,{get children(){return H(In,O(e))}}),O(t),O(n))}));export{Kn as default};
